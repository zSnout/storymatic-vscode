{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Storymatic",
  "patterns": [{ "include": "#global" }],
  "repository": {
    "global": {
      "patterns": [
        { "include": "#parenthesized" },
        { "include": "#bracketed" },
        { "include": "#object" },
        { "include": "#separators" },
        { "include": "#constants" },
        { "include": "#strings" },
        { "include": "#jsx-self-closing" },
        { "include": "#jsx-open-close" },
        { "include": "#keywords" }
      ]
    },
    "parenthesized": {
      "begin": "\\(",
      "end": "\\)",
      "beginCaptures": { "0": { "name": "meta.brace.storymatic" } },
      "endCaptures": { "0": { "name": "meta.brace.storymatic" } },
      "patterns": [{ "include": "#global" }]
    },
    "bracketed": {
      "begin": "\\[",
      "end": "\\]",
      "name": "meta.array.literal.storymatic",
      "beginCaptures": { "0": { "name": "meta.brace.storymatic" } },
      "endCaptures": { "0": { "name": "meta.brace.storymatic" } },
      "patterns": [{ "include": "#global" }]
    },
    "object": {
      "begin": "\\{",
      "end": "\\}",
      "name": "meta.object.literal.storymatic",
      "beginCaptures": { "0": { "name": "meta.brace.storymatic" } },
      "endCaptures": { "0": { "name": "meta.brace.storymatic" } },
      "patterns": [{ "include": "#global" }]
    },
    "separators": {
      "patterns": [
        {
          "name": "punctuation.separator.comma.storymatic",
          "match": ","
        },
        {
          "name": "punctuation.separator.semicolon.storymatic",
          "match": ";"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.storymatic",
          "match": "\\b(if|else|then|print|throw|for|while|until|unless|down|do|repeat|step|to|through|return|break|continue|fn|import|export|class|try|catch|finally|switch|case|default|rescope|down|type|interface|namespace|with|readonly|interface|enum|extends|implements|private|public|protected)\\b"
        },
        {
          "name": "keyword.operator.storymatic",
          "match": "\\b(and|or|not|isnt(\\s+a)?|is(\\s+a)?|new|in|typeof|type|of|from|as|await|infer|yield)\\b"
        },
        {
          "name": "keyword.operator.storymatic",
          "match": "\\+|-|\\*|\\/|^|\\.\\.\\.|%|<|>|=|!|&|\\||\\?|:"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.boolean.storymatic",
          "match": "\\b(true|false)\\b"
        },
        {
          "name": "constant.language.null.storymatic",
          "match": "\\bnull\\b"
        },
        {
          "name": "constant.language.undefined.storymatic",
          "match": "\\bundefined\\b"
        },
        {
          "name": "constant.numeric.storymatic",
          "captures": {
            "1": { "name": "storage.type.numeric.storymatic" }
          },
          "match": "\\d+(?:\\.\\d+)?(?:e[+-]?\\d+)?(\\w+)?"
        }
      ]
    },
    "jsx-open-close": {
      "name": "meta.tag.storymatic",
      "patterns": [
        {
          "begin": "(<)\\s*(\\w+(?:\\.\\w+)*)",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.tag.storymatic" },
            "2": { "name": "entity.name.tag.storymatic" }
          },
          "end": ">",
          "endCaptures": {
            "0": { "name": "punctuation.definition.tag.storymatic" }
          },
          "patterns": [{ "include": "#jsx-attributes" }]
        },
        {
          "begin": "(?<=>)",
          "end": "(?=<\\/)",
          "patterns": [{ "include": "#jsx-children" }]
        },
        {
          "match": "(</)\\s*(\\w+(?:\\.\\w+)*)\\s*(>)",
          "captures": {
            "1": { "name": "punctuation.definition.tag.storymatic" },
            "2": { "name": "entity.name.tag.storymatic" },
            "3": { "name": "punctuation.definition.tag.storymatic" }
          }
        }
      ]
    },
    "jsx-self-closing": {
      "name": "meta.tag.storymatic",
      "begin": "(<)\\s*(\\w+(?:\\.\\w+)*)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.storymatic" },
        "2": { "name": "entity.name.tag.storymatic" }
      },
      "end": "\\/>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.storymatic" }
      },
      "patterns": [{ "include": "#jsx-attributes" }]
    },
    "jsx-attributes": {
      "name": "meta.tag.attributes.storymatic",
      "begin": "\\s+",
      "end": "(?=\\/|>)",
      "patterns": [
        {
          "include": "#strings"
        },
        {
          "name": "entity.other.attribute-name.storymatic",
          "match": "\\w+"
        },
        {
          "name": "keyword.operator.assignment.storymatic",
          "match": "="
        },
        {
          "begin": "\\{",
          "end": "\\}",
          "patterns": [{ "include": "#global" }]
        }
      ]
    },
    "jsx-children": {
      "patterns": [
        {
          "include": "#jsx"
        },
        {
          "name": "meta.jsx.children.storymatic",
          "begin": "\\{",
          "end": "\\}",
          "patterns": [{ "include": "#global" }]
        },
        {
          "name": "meta.jsx.children.storymatic",
          "match": "[^{<]+"
        }
      ]
    },
    "strings": {
      "begin": "([\"'])",
      "end": "\\1",
      "name": "string.quoted.double.storymatic",
      "patterns": [
        {
          "name": "constant.character.escape.storymatic",
          "match": "\\\\x[0-9a-fA-F]{2}"
        },
        {
          "name": "constant.character.escape.storymatic",
          "match": "\\\\u[0-9a-fA-F]{4}"
        },
        {
          "name": "constant.character.escape.storymatic",
          "match": "\\\\u\\{[0-9a-fA-F]+\\}"
        },
        {
          "name": "constant.character.escape.storymatic",
          "match": "\\\\."
        },
        {
          "begin": "\\{",
          "end": "\\}",
          "name": "meta.template.expression.storymatic meta.embedded.line.storymatic",
          "patterns": [{ "include": "#global" }]
        }
      ]
    }
  },
  "scopeName": "source.storymatic"
}
